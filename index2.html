<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>20.3</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body>

  <canvas id="canvas" width="400" height="400" style="border: 1px solid black;"></canvas>

  <script>
    // задаємо контекст
    let canvas = document.getElementById("canvas");
    let ctx = canvas.getContext("2d");
    let width = canvas.width;
    let height = canvas.height;

    // функція малювання м'яча
    let circle = function(x, y, radius, fillCircle) {
        ctx.beginPath();
        ctx.arc(x, y, radius, 0, Math.PI * 2, false);
        if(fillCircle){
            ctx.fillStyle = "green";
            ctx.fill();
        } else {
            ctx.stroke();
        }
    };

    // конструктор Ball
    let Ball = function(){
        this.x = width / 2;
        this.y = height / 2;
        this.xSpeed = 5;
        this.ySpeed = 0;
    };

    // Зображення
    let yodaImg = new Image();
    yodaImg.src = "Yoda.jpg";

    //малюємо
    Ball.prototype.draw = function(){
        ctx.drawImage(yodaImg, this.x - 10, this.y - 10, 20, 20);
    };

//створюємо об'єкт м'яча
Ball.prototype.move = function(){
    this.x += this.xSpeed;
    this.y += this.ySpeed;
    if(this.x < 0){
        this.x = width;
    } else if (this.x > width){
        this.x = 0;
    } else if (this.y < 0){
        this.y = height;
    } else if (this.y > height){
        this.y = 0;
    }
};

    //задаємо напрямок руху по рядку з назвою дії
    Ball.prototype.setDirection = function(direction){
        if(direction === "up"){
            this.xSpeed = 0;
            this.ySpeed = -5;
        } else if(direction === "down"){
            this.xSpeed = 0;
            this.ySpeed = 5;
        } else if(direction === "left"){
            this.xSpeed = -5;
            this.ySpeed = 0;
        } else if(direction === "right"){
            this.xSpeed = 5;
            this.ySpeed = 0;
        } else if(direction === "stop"){
            this.xSpeed = 0;
            this.ySpeed = 0;
        }
    };

    //об'єкт для перекладу кодів клавіш в назви дій
    let keyActions = {
        32: "stop",
        65: "left",
        87: "up",
        68: "right",
        83: "down"
    };

    //обробник подій keydown, при конжному натисканню клавіші
    $("body").keydown(function(event){
        let direction = keyActions[event.keyCode];
        ball.setDirection(direction);
    });

    //функція анімації, раз в 30 секунд
    setInterval(function(){
        ctx.clearRect(0, 0, width, height);
        ball.draw();
        ball.move();
        ctx.strokeRect(0, 0, width, height);
    }, 30)
  </script>

</body>
</html>
